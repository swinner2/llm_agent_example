<turbo-frame id="message_<%= message.id %>">
  <div data-controller="scroll-into-view">
    <% if message.role == "assistant" %>
      <div class="flex items-start mb-4">
        <div class="bg-gray-100 rounded-lg px-4 py-2 max-w-[80%]">
          <% if message.content.present? %>
            <p class="text-gray-800 prose"><%= message.content.html_safe %></p>
          <% else %>
            <p class="text-gray-800 animate-bounce">Typing...</p>
          <% end %>
        </div>
      </div>
    <% elsif message.role == "user" %>
      <div class="flex items-start justify-end mb-4">
        <div class="bg-blue-500 text-white rounded-lg px-4 py-2 max-w-[80%]">
          <p class="text-white prose"><%= message.content.html_safe %></p>
        </div>
      </div>
    <% elsif message.role == "tool" %>
      <div class="flex items-start mb-4">
        <div class="bg-green-100 border border-green-300 rounded-lg px-4 py-2 max-w-[80%]">
          <% if message.content.present? %>
            <p class="text-gray-800">Finished tool call</p>
          <% else %>
            <p class="text-gray-800 animate-bounce">Running tool call</p>
          <% end %>
        </div>
      </div>
    <% end %>
</div>